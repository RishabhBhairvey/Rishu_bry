function PartnerService(e){this.baseUrl=e.baseUrl,this.site=e.site,this.contentType=e.contentType,this.locale=e.locale,this.controllerName=e.controllerName,this.pageviewGuid=e.pageviewGuid,this.sessionGuid=e.sessionGuid,sessionStorage.getItem("pscfgoverride")&&(this.overrideConfig=JSON.parse(sessionStorage.getItem("pscfgoverride")));const t=new URLSearchParams(this.commonParams());this.overrideConfig&&this.overrideConfig.provider&&t.set("c[p]",this.overrideConfig.provider);const n=this;fetch(this.baseUrl+"/api/v3/config?"+t.toString()).then(function(e){const t=e.json().then(function(e){const t={couponUrl:e.coupon_url,direct:e.direct,directUrl:e.direct_url,indirect:e.indirect,indirectUrl:e.indirect_url,provider:e.provider};e.coupon&&(t.coupon={code:e.coupon.code,expDate:e.coupon.exp_date,percent:e.coupon.percent}),this.overrideConfig&&Object.assign(t,this.overrideConfig),n.serviceConfig=t})})}PartnerService.prototype.whenReady=function(e){const t=this;this.serviceConfig?e():window.setTimeout(function(){t.whenReady(e)},100)},PartnerService.prototype.couponInfo=function(e){return e.coupon?{code:e.coupon.code,expDate:e.coupon.exp_date,percent:e.coupon.percent}:{}},PartnerService.prototype.couponUrl=function(e){const t=new URLSearchParams(this.commonParams());return e.placement&&t.set("c[pl]",e.placement),this.serviceConfig.couponUrl+"?"+t.toString()},PartnerService.prototype.directUrl=function(e){const t=new URLSearchParams(this.commonParams());return e.padWithTerms&&t.set("pt",e.padWithTerms),e.page&&t.set("p",e.page),e.perPage&&t.set("pp",e.perPage),e.placement&&t.set("c[pl]",e.placement),e.searchTerm&&t.set("t",e.searchTerm),this.serviceConfig.directUrl+"?"+t.toString()},PartnerService.prototype.indirectUrl=function(e){const t=new URLSearchParams(this.commonParams());return e.placement&&t.set("c[pl]",e.placement),e.searchTerm&&t.set("t",e.searchTerm),this.serviceConfig.indirectUrl+"?"+t.toString()},PartnerService.prototype.providerInfo=function(e){return{provider:e,logo:this.providerLogo(e),name:this.providerName(e)}},PartnerService.prototype.providerLogo=function(e){switch(e){case"sstk":return"/assets/shutterstock-logo.svg"}},PartnerService.prototype.providerName=function(e){switch(e){case"envato":return"Envato";case"istock":return"iStock";case"sstk":return"Shutterstock";case"vecteezy":return"Vecteezy";case"storyblocks":return"Storyblocks";default:return e}},PartnerService.prototype.showDirect=function(){return this.serviceConfig.direct},PartnerService.prototype.showIndirect=function(){return this.serviceConfig.indirect},PartnerService.prototype.pageKey=function(){if(!this.controllerName)return null;switch(this.controllerName){case"searches":return"search";case"resources":return"show";default:return null}},PartnerService.prototype.commonParams=function(){const e={ct:this.contentType,h:window.location.hostname,l:this.locale,pv:this.pageviewGuid,sg:this.sessionGuid,s:this.site};return this.overrideConfig&&this.overrideConfig.provider&&(e["c[p]"]=this.overrideConfig.provider),this.pageKey()&&(e["c[pk]"]=this.pageKey()),e},window.PartnerService=PartnerService;